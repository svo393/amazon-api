# Migration `20200501170238-relations`

This migration has been generated by Sergei Ovchinnikov at 5/1/2020, 5:02:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Order" ALTER COLUMN "status" SET DEFAULT 'NEW';

ALTER TABLE "public"."User" ALTER COLUMN "role" SET DEFAULT 'CUSTOMER';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200429135857-init..20200501170238-relations
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -28,36 +28,44 @@
   category         Category   @relation(fields: [categoryName], references: [name])
   categoryName     String
   vendor           Vendor     @relation(fields: [vendorName], references: [name])
   vendorName       String
+  CartItem         CartItem[]
 }
 model Category {
-  id       String    @default(cuid()) @id
-  name     String    @unique
-  parent   Category? @relation("CategoryToCategory", fields: [parentID], references: [id])
+  id       String     @default(cuid()) @id
+  name     String     @unique
+  parent   Category?  @relation("CategoryToCategory", fields: [parentID], references: [id])
   parentID String?
+  items    Item[]
+  children Category[] @relation("CategoryToCategory")
 }
 model Vendor {
   id   String @default(cuid()) @id
   name String @unique
+  Item Item[]
 }
 model User {
-  id               String      @default(cuid()) @id
+  id               String          @default(cuid()) @id
   name             String?
-  email            String      @unique
+  email            String          @unique
   password         String
-  avatar           Boolean     @default(false)
-  createdAt        DateTime    @default(now())
-  resetToken       String?     @unique
+  avatar           Boolean         @default(false)
+  createdAt        DateTime        @default(now())
+  resetToken       String?         @unique
   resetTokenExpiry String?
-  role             Role        @default(CUSTOMER)
+  role             Role            @default(CUSTOMER)
   cart             CartItem[]
   items            Item[]
   orders           Order[]
   orderItems       OrderItem[]
+  Rating           Rating[]
+  RatingComment    RatingComment[]
+  Answer           Answer[]
+  AnswerComment    AnswerComment[]
 }
 model CartItem {
   id     String @default(cuid()) @id
```


